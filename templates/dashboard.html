<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cashanova - Financial Calendar</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.0/main.min.css">
    <style>
        :root {
            --primary-color: #6366f1;
            --secondary-color: #4f46e5;
            --accent-color: #818cf8;
            --text-color: #1e293b;
            --bg-color: #f8fafc;
            --card-bg: #ffffff;
        }
        
        body {
            background-color: var(--bg-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--text-color);
            margin: 0;
            padding: 0;
        }
        
        .container-fluid {
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .page-header {
            margin-bottom: 2rem;
        }
        
        .page-header h1 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .page-header p {
            color: #64748b;
            margin: 0;
        }
        
        .calendar-container {
            background-color: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);
            padding: 1.5rem;
        }
        
        .fc-header-toolbar {
            margin-bottom: 1.5em !important;
        }
        
        .fc-button-primary {
            background-color: var(--primary-color) !important;
            border-color: var(--primary-color) !important;
        }
        
        .fc-button-primary:hover {
            background-color: var(--secondary-color) !important;
            border-color: var(--secondary-color) !important;
        }
        
        .fc-button-primary:disabled {
            background-color: #94a3b8 !important;
            border-color: #94a3b8 !important;
        }
        
        .fc-col-header-cell-cushion {
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .fc-daygrid-day-number {
            color: var(--text-color);
            font-weight: 500;
        }
        
        .fc-event {
            border: none;
            border-radius: 4px;
            padding: 2px 4px;
            cursor: pointer;
        }
        
        .fc-day-today {
            background-color: rgba(99, 102, 241, 0.1) !important;
        }
        
        .modal-content {
            border-radius: 16px;
            border: none;
        }
        
        .modal-header {
            border-bottom: 1px solid #e2e8f0;
            background-color: rgba(99, 102, 241, 0.05);
            border-radius: 16px 16px 0 0;
        }
        
        .modal-title {
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .modal-footer {
            border-top: 1px solid #e2e8f0;
        }
        
        .form-label {
            font-weight: 500;
            color: var(--text-color);
            margin-bottom: 0.5rem;
        }
        
        .form-control, .form-select {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 0.5rem 0.75rem;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            border-radius: 8px;
            padding: 0.5rem 1.25rem;
            font-weight: 500;
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .btn-secondary {
            border-radius: 8px;
            padding: 0.5rem 1.25rem;
        }
        
        .btn-danger {
            border-radius: 8px;
            padding: 0.5rem 1.25rem;
        }
        
        .event-type-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-right: 0.5rem;
        }
        
        .badge-conversion {
            background-color: #dbeafe;
            color: #1e40af;
        }
        
        .badge-meeting {
            background-color: #fce7f3;
            color: #9f1239;
        }
        
        .badge-reminder {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .badge-other {
            background-color: #e0e7ff;
            color: #3730a3;
        }
        
        .event-details {
            margin-top: 1rem;
        }
        
        .event-details p {
            margin-bottom: 0.5rem;
        }
        
        .event-details strong {
            color: var(--primary-color);
        }
        
        .alert-info {
            background-color: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.2);
            color: var(--text-color);
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="page-header">
            <h1><i class="fas fa-calendar-alt"></i> Financial Calendar</h1>
            <p>Track important dates, conversions, and financial events</p>
        </div>
        
        <div class="alert alert-info">
            <i class="fas fa-info-circle"></i> <strong>Note:</strong> Events are stored in your current session. They will be cleared when you refresh the page.
        </div>
        
        <div class="calendar-container">
            <div id="calendar"></div>
        </div>
    </div>
    
    <!-- Add Event Modal -->
    <div class="modal fade" id="addEventModal" tabindex="-1" aria-labelledby="addEventModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addEventModalLabel">
                        <i class="fas fa-plus-circle"></i> Add New Event
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addEventForm">
                        <div class="mb-3">
                            <label for="eventTitle" class="form-label">Event Title</label>
                            <input type="text" class="form-control" id="eventTitle" required placeholder="Enter event title">
                        </div>
                        
                        <div class="mb-3">
                            <label for="eventDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="eventDescription" rows="3" placeholder="Enter event description (optional)"></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="eventType" class="form-label">Event Type</label>
                            <select class="form-select" id="eventType" required>
                                <option value="">Select type...</option>
                                <option value="conversion">Currency Conversion</option>
                                <option value="meeting">Meeting</option>
                                <option value="reminder">Reminder</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="eventDate" class="form-label">Date</label>
                            <input type="date" class="form-control" id="eventDate" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="eventTime" class="form-label">Time (Optional)</label>
                            <input type="time" class="form-control" id="eventTime">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveEventBtn">
                        <i class="fas fa-save"></i> Save Event
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- View Event Modal -->
    <div class="modal fade" id="viewEventModal" tabindex="-1" aria-labelledby="viewEventModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewEventModalLabel">
                        <i class="fas fa-calendar-check"></i> Event Details
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="eventDetailsContent"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" id="deleteEventBtn">
                        <i class="fas fa-trash"></i> Delete Event
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.0/main.min.js"></script>
    <script>
        // In-memory storage for events (no localStorage)
        let events = [
            {
                id: '1',
                title: 'USD to EUR Conversion',
                description: 'Convert $10,000 to EUR for European investment',
                type: 'conversion',
                start: new Date(new Date().getFullYear(), new Date().getMonth(), 15).toISOString().split('T')[0],
                backgroundColor: '#3b82f6',
                borderColor: '#3b82f6'
            },
            {
                id: '2',
                title: 'Quarterly Financial Review',
                description: 'Review Q4 currency trends and portfolio performance',
                type: 'meeting',
                start: new Date(new Date().getFullYear(), new Date().getMonth(), 20).toISOString().split('T')[0],
                backgroundColor: '#ec4899',
                borderColor: '#ec4899'
            },
            {
                id: '3',
                title: 'Check GBP Exchange Rate',
                description: 'Monitor GBP rate for upcoming UK transaction',
                type: 'reminder',
                start: new Date(new Date().getFullYear(), new Date().getMonth(), 25).toISOString().split('T')[0],
                backgroundColor: '#f59e0b',
                borderColor: '#f59e0b'
            }
        ];
        
        let calendar;
        let selectedEventId = null;
        
        // Event type colors
        const eventTypeColors = {
            conversion: { bg: '#3b82f6', border: '#3b82f6' },
            meeting: { bg: '#ec4899', border: '#ec4899' },
            reminder: { bg: '#f59e0b', border: '#f59e0b' },
            other: { bg: '#6366f1', border: '#6366f1' }
        };
        
        document.addEventListener('DOMContentLoaded', function() {
            const calendarEl = document.getElementById('calendar');
            const addEventModal = new bootstrap.Modal(document.getElementById('addEventModal'));
            const viewEventModal = new bootstrap.Modal(document.getElementById('viewEventModal'));
            
            // Initialize calendar
            calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,dayGridWeek,dayGridDay'
                },
                events: events,
                dateClick: function(info) {
                    // Open add event modal with selected date
                    document.getElementById('eventDate').value = info.dateStr;
                    document.getElementById('addEventForm').reset();
                    document.getElementById('eventDate').value = info.dateStr;
                    addEventModal.show();
                },
                eventClick: function(info) {
                    // Show event details
                    selectedEventId = info.event.id;
                    showEventDetails(info.event);
                    viewEventModal.show();
                }
            });
            
            calendar.render();
            
            // Save event button
            document.getElementById('saveEventBtn').addEventListener('click', function() {
                const form = document.getElementById('addEventForm');
                
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const title = document.getElementById('eventTitle').value;
                const description = document.getElementById('eventDescription').value;
                const type = document.getElementById('eventType').value;
                const date = document.getElementById('eventDate').value;
                const time = document.getElementById('eventTime').value;
                
                const colors = eventTypeColors[type] || eventTypeColors.other;
                
                const newEvent = {
                    id: Date.now().toString(),
                    title: title,
                    description: description,
                    type: type,
                    start: time ? `${date}T${time}` : date,
                    backgroundColor: colors.bg,
                    borderColor: colors.border,
                    extendedProps: {
                        description: description,
                        type: type
                    }
                };
                
                events.push(newEvent);
                calendar.addEvent(newEvent);
                
                addEventModal.hide();
                form.reset();
                
                showNotification('Event added successfully!', 'success');
            });
            
            // Delete event button
            document.getElementById('deleteEventBtn').addEventListener('click', function() {
                if (!selectedEventId) return;
                
                // Remove from events array
                events = events.filter(e => e.id !== selectedEventId);
                
                // Remove from calendar
                const event = calendar.getEventById(selectedEventId);
                if (event) {
                    event.remove();
                }
                
                viewEventModal.hide();
                selectedEventId = null;
                
                showNotification('Event deleted successfully!', 'danger');
            });
        });
        
        function showEventDetails(event) {
            const typeLabels = {
                conversion: 'Currency Conversion',
                meeting: 'Meeting',
                reminder: 'Reminder',
                other: 'Other'
            };
            
            const typeBadgeClass = {
                conversion: 'badge-conversion',
                meeting: 'badge-meeting',
                reminder: 'badge-reminder',
                other: 'badge-other'
            };
            
            const type = event.extendedProps?.type || 'other';
            const description = event.extendedProps?.description || 'No description provided';
            
            const startDate = new Date(event.start);
            const formattedDate = startDate.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            const formattedTime = event.allDay ? 'All Day' : startDate.toLocaleTimeString('en-US', {
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const detailsHtml = `
                <div class="event-details">
                    <h5>${event.title}</h5>
                    <span class="event-type-badge ${typeBadgeClass[type]}">${typeLabels[type]}</span>
                    <hr>
                    <p><strong><i class="fas fa-calendar"></i> Date:</strong> ${formattedDate}</p>
                    <p><strong><i class="fas fa-clock"></i> Time:</strong> ${formattedTime}</p>
                    <p><strong><i class="fas fa-align-left"></i> Description:</strong></p>
                    <p>${description}</p>
                </div>
            `;
            
            document.getElementById('eventDetailsContent').innerHTML = detailsHtml;
        }
        
        function showNotification(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.style.position = 'fixed';
            alertDiv.style.top = '20px';
            alertDiv.style.right = '20px';
            alertDiv.style.zIndex = '9999';
            alertDiv.style.minWidth = '300px';
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 3000);
        }
    </script>
</body>
</html>
